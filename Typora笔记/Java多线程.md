

# Java多线程

进程：操作系统进行**资源分配**的基本单位

线程：操作系统进行**资源调度**的基本单位，即cpu分配时间的单位



Java线程执行方式为**抢占式**



上下文切换

CPU从一个进程（线程）切换到另一个进程（线程）

上下文：某一时间点，CPU寄存器和程序计数器的内容



上下文切换通常是计算密集型的，消耗大量的CPU时间

线程不是越多越好。减少系统中上下文切换次数，是提升多线程性能的一个重点课题



## Java线程的6个状态

```Java
public enum State {
    NEW,   			// 1.新建
    RUNNABLE,	    // 2.就绪
    BLOCKED,		// 3.阻塞
    WAITING,		// 4.等待
    TIMED_WAITING,  // 5.超时等待
    TERMINATED;		// 6.完成
}

```



获取当前线程状态

```java
thread.getState();
```



| 状态     | 描述                                                  |                                                              |
| -------- | ----------------------------------------------------- | ------------------------------------------------------------ |
| NEW      | 该状态的线程尚未启动，thread实例的start()方法没被调用 |                                                              |
| RUNNABLE | 包括了传统操作系统线程的 ready 和 running 两个状态    |                                                              |
| BLOCKED  | 等待锁的释放以进入同步区                              |                                                              |
| WAITING  | waiting状态的线程变成runnable状态，需要其他线程唤醒   | 三个方法可以使线程进入waiting状态： Object.wait() 使当前线程进入当代状态直到另一个线程唤醒它；Thread.join()等待线程执行完毕，底层调用的是Object实例的wait()方法；LockSupport.park()除非获得调用许可，否则禁用当前线程进行线程调度 |
|          |                                                       |                                                              |
|          |                                                       |                                                              |

